import{_ as u,a as n}from"./table-b503a501.js";import{n as m}from"./notify-52100194.js";import{d as f,i as r,e as c,n as p}from"./pinia-e02b714a.js";import{_ as v}from"./switch-0490ac5b.js";import{_,a as i}from"./form-44dfdb5b.js";import{_ as y}from"./dialog-53d393d5.js";import"./checkbox-a9a3b673.js";import"./scrollbar-f9346d3c.js";import"./index-f03b1c2a.js";import"./checkbox-group-68521ad5.js";import"./index-3e66c890.js";var l=(o=>(o[o.Stop=0]="Stop",o[o.Running=1]="Running",o[o.AlreadyUsed=2]="AlreadyUsed",o))(l||{});const d=f("forward",{state:()=>({panel:{visible:!1,loading:!1,edit:{name:null,autoStartUp:null,type:null,localHost:null,localPort:null,remoteHost:null,remotePort:null}}})});const b={mixins:[r],data(){return{config:{}}},computed:{...c(d,{panel:o=>o.panel}),localPortPlaceHolder(){return this.panel.edit.type=="Dynamic"?"1080":"port"},forwardNotice(){switch(this.panel.edit.type){case"Local":return"Forward destination address from remote server to local.";case"Remote":return"Forward local address to remote server."}return"Create a local socks proxy using a remote server."}},watch:{"panel.edit.type"(o){this.panel.edit.id||(this.panel.edit.remoteHost=o=="Remote"?this.config.host:"127.0.0.1")}},mounted(){this.on("config",o=>{this.config=o})},methods:{confirmSave(){this.emit("save",this.panel.edit),this.panel.loading=!0}}};var h=function(){var t=this,e=t._self._c;return e(y,{ref:"editDialog",attrs:{title:"Port Fowarding",visible:t.panel.visible,width:"550px",top:"3vh",closeOnClickModal:!1},on:{"update:visible":function(a){return t.$set(t.panel,"visible",a)}}},[e(_,{ref:"infoForm",attrs:{model:t.panel.edit,"label-width":"120px"}},[e("div",{staticClass:"mb-2 ml-20"},[t._v(" "+t._s(t.forwardNotice)+" ")]),e(i,{attrs:{size:"mini"},scopedSlots:t._u([{key:"label",fn:function(){return[e("RedMark"),t._v("Type ")]},proxy:!0}])},[e("vsc-radio-group",{staticClass:"!inline-flex",attrs:{size:"mini"},model:{value:t.panel.edit.type,callback:function(a){t.$set(t.panel.edit,"type",a)},expression:"panel.edit.type"}},[e("vsc-radio-button",{attrs:{label:"Local"},model:{value:t.panel.edit.type,callback:function(a){t.$set(t.panel.edit,"type",a)},expression:"panel.edit.type"}}),e("vsc-radio-button",{attrs:{label:"Remote"},model:{value:t.panel.edit.type,callback:function(a){t.$set(t.panel.edit,"type",a)},expression:"panel.edit.type"}}),e("vsc-radio-button",{attrs:{label:"Dynamic"},model:{value:t.panel.edit.type,callback:function(a){t.$set(t.panel.edit,"type",a)},expression:"panel.edit.type"}},[t._v(" Dynamic(Socks Proxy) ")])],1)],1),e(i,{attrs:{size:"mini"},scopedSlots:t._u([{key:"label",fn:function(){return[e("RedMark"),t._v("Local ")]},proxy:!0}])},[e("div",{staticClass:"flex flex-row items-center w-72"},[e("vsc-input",{staticClass:"basis-72",model:{value:t.panel.edit.localHost,callback:function(a){t.$set(t.panel.edit,"localHost",a)},expression:"panel.edit.localHost"}}),e("span",{staticClass:"basis-14 text-center text-base"},[t._v(":")]),e("vsc-input",{staticClass:"basis-32",attrs:{placeholder:t.localPortPlaceHolder},model:{value:t.panel.edit.localPort,callback:function(a){t.$set(t.panel.edit,"localPort",a)},expression:"panel.edit.localPort"}})],1)]),t.panel.edit.type!="Dynamic"?[e("div",{staticClass:"forward-arrow"},[t.panel.edit.type=="Remote"?e("i",{staticClass:"el-icon-bottom"}):e("i",{staticClass:"el-icon-top"})]),e(i,{attrs:{size:"mini"},scopedSlots:t._u([{key:"label",fn:function(){return[e("RedMark"),t._v("Remote ")]},proxy:!0}],null,!1,664957416)},[e("div",{staticClass:"flex flex-row items-center w-72"},[e("vsc-input",{staticClass:"basis-72",model:{value:t.panel.edit.remoteHost,callback:function(a){t.$set(t.panel.edit,"remoteHost",a)},expression:"panel.edit.remoteHost"}}),e("span",{staticClass:"basis-14 text-center text-base"},[t._v(":")]),e("vsc-input",{staticClass:"basis-32",attrs:{placeholder:"port"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.confirmSave.apply(null,arguments)}},model:{value:t.panel.edit.remotePort,callback:function(a){t.$set(t.panel.edit,"remotePort",a)},expression:"panel.edit.remotePort"}})],1)])]:t._e(),e("div",{staticClass:"flex flex-row"},[e(i,{staticClass:"w-64",attrs:{size:"mini",label:"Name"}},[e("vsc-input",{model:{value:t.panel.edit.name,callback:function(a){t.$set(t.panel.edit,"name",a)},expression:"panel.edit.name"}})],1),e(i,{staticClass:"auto-start-form-item",attrs:{size:"mini",label:"Auto Start",title:"Auto start with VS Code startup"}},[e(v,{staticClass:"ml-2",model:{value:t.panel.edit.autoStartUp,callback:function(a){t.$set(t.panel.edit,"autoStartUp",a)},expression:"panel.edit.autoStartUp"}})],1)],1)],2),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("vsc-button",{attrs:{type:"secondary",size:"mini"},on:{click:function(a){t.panel.visible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),e("vsc-button",{attrs:{loading:t.panel.loading,size:"mini"},on:{click:t.confirmSave}},[t._v("Save")])],1)],1)},g=[],x=p(b,h,g,!1,null,"2b45f4e1",null,null);const w=x.exports,k={components:{ForwardDialog:w},mixins:[r],data(){return{name:"",forwardList:[]}},computed:{...c(d,{panel:o=>o.panel})},mounted(){this.on("forwardList",o=>{this.forwardList=o,this.panel.loading=!1,this.panel.visible=!1}).on("name",o=>{this.name=o}).on("success",()=>{this.error=!1,this.emit("load")}).on("error",({id:o,message:t})=>{for(const e of this.forwardList)e.id==o&&(e.loading=!1);this.panel.loading=!1,m({message:t,type:"error",position:"top-left"})}).init()},methods:{createRequest(){this.panel.edit={type:"Local",autoStartUp:!0,localHost:"127.0.0.1",remoteHost:"127.0.0.1"},this.panel.visible=!0},load(){this.emit("load")},getState(o){switch(o){case l.Running:return"Running";case l.AlreadyUsed:return"AlreadyUsed";default:return"Stop"}},start(o){o.loading=!0,this.emit("start",o.id)},stop(o){this.emit("stop",o)},remove(o){this.emit("remove",o)},openEdit(o){this.panel.edit={...o},this.panel.visible=!0},deleteConfirm(o){this.$confirm("Are you sure to delete this forward?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.remove(o)})}}};var S=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"ml-2 my-1 text-base"},[t._v(" Connection: "+t._s(t.name)),e("br"),e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiCyan)"},attrs:{type:"icon",icon:"codicon-add text-base"},on:{click:t.createRequest}}),e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiBrightGreen)"},attrs:{type:"icon",icon:"codicon-refresh text-base"},on:{click:t.load}})],1),e(u,{staticStyle:{width:"100%"},attrs:{data:t.forwardList}},[e(n,{attrs:{prop:"name",label:"Name"}}),e(n,{attrs:{prop:"type",label:"Type"}}),e(n,{attrs:{prop:"localPort",label:"Local Port"}}),e(n,{attrs:{prop:"remoteHost",label:"Remote Host"}}),e(n,{attrs:{prop:"remotePort",label:"Remote Port"}}),e(n,{attrs:{prop:"autoStartUp",label:"Auto Start"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.autoStartUp?e("vsc-button",{attrs:{type:"icon",icon:"el-icon-check text-base text-green"}}):e("vsc-button",{attrs:{type:"icon",icon:"el-icon-close text-base text-red"}})]}}])}),e(n,{attrs:{prop:"state",label:"State"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.getState(a.row.state))+" ")]}}])}),e(n,{attrs:{fixed:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.state!=1?e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiBrightGreen)"},attrs:{type:"success",size:"small",title:"Start",loading:a.row.loading,icon:"el-icon-video-play",circle:""},on:{click:function(s){return t.start(a.row)}}}):t._e(),a.row.state==1?e("vsc-button",{attrs:{type:"danger",size:"small",title:"Stop",icon:"el-icon-switch-button",circle:""},on:{click:function(s){return t.stop(a.row.id)}}}):t._e(),e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiCyan)"},attrs:{type:"primary",size:"small",title:"Edit",icon:"el-icon-edit",circle:""},on:{click:function(s){return t.openEdit(a.row)}}}),e("vsc-button",{staticStyle:{color:"#f56c6c"},attrs:{title:"delete",type:"danger",size:"small",icon:"el-icon-delete",circle:""},on:{click:function(s){return t.deleteConfirm(a.row.id)}}})]}}])})],1),e("ForwardDialog",{ref:"fowardDialog"})],1)},C=[],$=p(k,S,C,!1,null,null,null,null);const M=$.exports;export{M as default};
